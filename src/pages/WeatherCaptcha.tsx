import React,{useState as uS,useEffect as uE}from'react';import{useNavigate as uN}from'react-router-dom';import{Card as C}from'../components/WeatherGame/Card';import{useTheme as uT}from'../context/ThemeContext';import{GameCard as G}from'../components/WeatherGame/types';import{weatherIcons as wI}from'../components/WeatherGame/constants';import{createDeck as cD,checkForMatch as cM}from'../components/WeatherGame/utils';export function WeatherCaptcha(){const n=uN(),{isDarkMode:iD}=uT(),[c,sC]=uS<G[]>(cD()),[f,sF]=uS<number[]>([]),[m,sM]=uS(0),[l,sL]=uS(!1);uE(()=>{if(m===wI.length)setTimeout(()=>{n('/weather')},1e3)},[m,n]);const hC=id=>{const o=c.find(c=>c.id===id);if(l||!o||o.isFlipped||o.isMatched)return;sC(p=>p.map(c=>c.id===id?{...c,isFlipped:!0}:c)),sF(p=>[...p,id]);if(f.length===1){sL(!0),cM(c,f[0],id)?setTimeout(()=>{sC(p=>p.map(c=>c.id===id||c.id===f[0]?{...c,isMatched:!0}:c)),sM(p=>p+1),sF([]),sL(!1)},500):setTimeout(()=>{sC(p=>p.map(c=>c.id===id||c.id===f[0]?{...c,isFlipped:!1}:c)),sF([]),sL(!1)},1e3)}};return React.createElement('div',{className:'max-w-xl mx-auto px-4 py-8'},React.createElement('div',{className:'text-center mb-8'},React.createElement('h1',{className:`text-3xl font-bold mb-4 transition-colors duration-200 ${iD?'text-white':'text-gray-900'}`},'Défi Météo'),React.createElement('p',{className:`transition-colors duration-200 ${iD?'text-gray-300':'text-gray-600'}`},'Trouvez toutes les paires d\'icônes météo pour accéder aux prévisions')),React.createElement('div',{className:'grid grid-cols-2 sm:grid-cols-4 gap-4 max-w-md mx-auto'},c.map(o=>React.createElement(C,{key:o.id,icon:o.icon,isFlipped:o.isFlipped,isMatched:o.isMatched,onClick:()=>hC(o.id),isDarkMode:iD}))),React.createElement('div',{className:`mt-8 text-center transition-colors duration-200 ${iD?'text-gray-300':'text-gray-600'}`},`Paires trouvées: ${m} / ${wI.length}`))}
